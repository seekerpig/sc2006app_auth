{"ast":null,"code":"var Promise = require('bluebird');\n\nvar Stream = require('stream');\n\nvar Buffer = require('./Buffer'); // Backwards compatibility for node versions < 8\n\n\nif (!Stream.Writable || !Stream.Writable.prototype.destroy) Stream = require('readable-stream');\n\nmodule.exports = function (entry) {\n  return new Promise(function (resolve, reject) {\n    var chunks = [];\n    var bufferStream = Stream.Transform().on('finish', function () {\n      resolve(Buffer.concat(chunks));\n    }).on('error', reject);\n\n    bufferStream._transform = function (d, e, cb) {\n      chunks.push(d);\n      cb();\n    };\n\n    entry.on('error', reject).pipe(bufferStream);\n  });\n};","map":null,"metadata":{},"sourceType":"script"}