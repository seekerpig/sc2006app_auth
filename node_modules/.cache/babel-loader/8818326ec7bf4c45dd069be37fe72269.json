{"ast":null,"code":"import _slicedToArray from \"/Users/chuayannaroj/Documents/SC2006 Projects/sc2006app_auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/chuayannaroj/Documents/SC2006 Projects/sc2006app_auth/src/Control/SessionController.js\";\nimport React, { useState, useContext, useEffect } from 'react';\nimport { auth } from \"./DatabaseController\";\nimport { signOut } from 'firebase/auth';\nvar AuthContext = React.createContext();\nexport function useAuth() {\n  return useContext(AuthContext); //returns currentUser and logout function\n}\nexport function AuthProvider(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      currentUser = _useState2[0],\n      setCurrentUser = _useState2[1];\n\n  var _useState3 = useState(true),\n      _useState4 = _slicedToArray(_useState3, 2),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  function logout() {\n    console.log(\"trying to logout\");\n    signOut(auth).then(function () {\n      console.log(\"logout successful\");\n    }).catch(function (error) {\n      console.log(\"failed to logout\");\n    });\n  }\n\n  useEffect(function () {\n    var unsubscribe = auth.onAuthStateChanged(function (user) {\n      setCurrentUser(user);\n      setLoading(false);\n    });\n    return unsubscribe;\n  }, []);\n  var value = {\n    currentUser: currentUser,\n    logout: logout\n  };\n  return /*#__PURE__*/React.createElement(AuthContext.Provider, {\n    value: value,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 5\n    }\n  }, !loading && children);\n}","map":{"version":3,"names":["React","useState","useContext","useEffect","auth","signOut","AuthContext","createContext","useAuth","AuthProvider","children","currentUser","setCurrentUser","loading","setLoading","logout","console","log","then","catch","error","unsubscribe","onAuthStateChanged","user","value"],"sources":["/Users/chuayannaroj/Documents/SC2006 Projects/sc2006app_auth/src/Control/SessionController.js"],"sourcesContent":["import React, {useState, useContext, useEffect} from 'react'\nimport {auth} from \"./DatabaseController\";\nimport {signOut } from 'firebase/auth';\n\n\n\nconst AuthContext = React.createContext();\n\n\nexport function useAuth(){\n    return useContext(AuthContext); //returns currentUser and logout function\n}\n\n\nexport function AuthProvider({children}) {\n\n    const[currentUser, setCurrentUser] = useState();\n    const[loading, setLoading] = useState(true);\n\n    \n\n\n    function logout()\n    {\n        console.log(\"trying to logout\");\n        signOut(auth).then(() => {\n            console.log(\"logout successful\");\n        }).catch((error)=> {\n            console.log(\"failed to logout\");\n        });\n    }\n\n    useEffect(() => {\n        const unsubscribe = auth.onAuthStateChanged(user => {\n            setCurrentUser(user);\n            setLoading(false);\n        })\n\n        return unsubscribe;\n    }, [])\n    \n\n\n    const value = {\n        currentUser,\n        logout,\n    };\n\n  return (\n    <AuthContext.Provider value={value}>\n        {!loading && children}\n    </AuthContext.Provider>\n    \n  )\n}\n"],"mappings":";;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,UAAzB,EAAqCC,SAArC,QAAqD,OAArD;AACA,SAAQC,IAAR,QAAmB,sBAAnB;AACA,SAAQC,OAAR,QAAuB,eAAvB;AAIA,IAAMC,WAAW,GAAGN,KAAK,CAACO,aAAN,EAApB;AAGA,OAAO,SAASC,OAAT,GAAkB;EACrB,OAAON,UAAU,CAACI,WAAD,CAAjB,CADqB,CACW;AACnC;AAGD,OAAO,SAASG,YAAT,OAAkC;EAAA,IAAXC,QAAW,QAAXA,QAAW;;EAAA,gBAEAT,QAAQ,EAFR;EAAA;EAAA,IAE/BU,WAF+B;EAAA,IAElBC,cAFkB;;EAAA,iBAGRX,QAAQ,CAAC,IAAD,CAHA;EAAA;EAAA,IAG/BY,OAH+B;EAAA,IAGtBC,UAHsB;;EAQrC,SAASC,MAAT,GACA;IACIC,OAAO,CAACC,GAAR,CAAY,kBAAZ;IACAZ,OAAO,CAACD,IAAD,CAAP,CAAcc,IAAd,CAAmB,YAAM;MACrBF,OAAO,CAACC,GAAR,CAAY,mBAAZ;IACH,CAFD,EAEGE,KAFH,CAES,UAACC,KAAD,EAAU;MACfJ,OAAO,CAACC,GAAR,CAAY,kBAAZ;IACH,CAJD;EAKH;;EAEDd,SAAS,CAAC,YAAM;IACZ,IAAMkB,WAAW,GAAGjB,IAAI,CAACkB,kBAAL,CAAwB,UAAAC,IAAI,EAAI;MAChDX,cAAc,CAACW,IAAD,CAAd;MACAT,UAAU,CAAC,KAAD,CAAV;IACH,CAHmB,CAApB;IAKA,OAAOO,WAAP;EACH,CAPQ,EAON,EAPM,CAAT;EAWA,IAAMG,KAAK,GAAG;IACVb,WAAW,EAAXA,WADU;IAEVI,MAAM,EAANA;EAFU,CAAd;EAKF,oBACE,oBAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAES,KAA7B;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACK,CAACX,OAAD,IAAYH,QADjB,CADF;AAMD"},"metadata":{},"sourceType":"module"}